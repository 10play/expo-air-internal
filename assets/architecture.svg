<svg width="1200" height="760" viewBox="0 0 1200 760" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <radialGradient id="bgGlow" cx="50%" cy="40%" r="60%">
      <stop offset="0%" stop-color="#0a1a0a"/>
      <stop offset="100%" stop-color="#050505"/>
    </radialGradient>
    <radialGradient id="claudeGlow" cx="50%" cy="50%" r="60%">
      <stop offset="0%" stop-color="#4CD964" stop-opacity="0.07"/>
      <stop offset="100%" stop-color="#4CD964" stop-opacity="0"/>
    </radialGradient>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#4CD964"/>
    </marker>
    <marker id="arrowDim" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="5" markerHeight="5" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#4CD964" opacity="0.25"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="760" fill="#050505"/>
  <rect width="1200" height="760" fill="url(#bgGlow)"/>

  <!-- Subtle grid -->
  <g opacity="0.025" stroke="white" stroke-width="0.5">
    <line x1="0" y1="190" x2="1200" y2="190"/>
    <line x1="0" y1="380" x2="1200" y2="380"/>
    <line x1="0" y1="570" x2="1200" y2="570"/>
    <line x1="300" y1="0" x2="300" y2="760"/>
    <line x1="600" y1="0" x2="600" y2="760"/>
    <line x1="900" y1="0" x2="900" y2="760"/>
  </g>

  <!-- Title -->
  <text x="600" y="52" text-anchor="middle" font-family="system-ui, -apple-system, 'Segoe UI', sans-serif" font-size="28" font-weight="700" fill="white" letter-spacing="-0.5">How It Works</text>
  <text x="600" y="82" text-anchor="middle" font-family="system-ui, -apple-system, 'Segoe UI', sans-serif" font-size="14" fill="white" opacity="0.35">the vibe coding loop — from prompt to live update</text>

  <!-- ═══════════════════════════════ -->
  <!-- REGIONS                         -->
  <!-- ═══════════════════════════════ -->

  <!-- Device region -->
  <rect x="40" y="112" width="245" height="530" rx="20" fill="#070707" stroke="#141414" stroke-width="1"/>
  <text x="162" y="138" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white" opacity="0.2" letter-spacing="3">DEVICE</text>

  <!-- Your Machine region -->
  <rect x="415" y="112" width="745" height="530" rx="20" fill="#070707" stroke="#141414" stroke-width="1"/>
  <text x="787" y="138" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white" opacity="0.2" letter-spacing="3">YOUR MACHINE</text>

  <!-- Tunnel zone label -->
  <text x="338" y="395" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#4CD964" opacity="0.3" letter-spacing="2" transform="rotate(-90, 338, 395)">CLOUDFLARE TUNNEL</text>

  <!-- ═══════════════════════════════ -->
  <!-- PHONE MOCKUP                    -->
  <!-- ═══════════════════════════════ -->

  <rect x="72" y="158" width="190" height="455" rx="18" fill="#0a0a0a" stroke="#191919" stroke-width="1"/>

  <!-- Dynamic Island -->
  <rect x="132" y="160" width="64" height="6" rx="3" fill="#111" stroke="#1a1a1a" stroke-width="0.5"/>

  <!-- Widget section -->
  <rect x="87" y="192" width="160" height="178" rx="8" fill="#0d0d0d" stroke="#1a1a1a" stroke-width="0.5"/>
  <text x="167" y="218" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="white">Widget</text>
  <text x="167" y="236" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="white" opacity="0.3">Isolated Hermes Runtime</text>

  <!-- Chat bubbles -->
  <rect x="100" y="254" width="80" height="14" rx="7" fill="#151515"/>
  <rect x="125" y="274" width="90" height="14" rx="7" fill="#0b180b" stroke="#163016" stroke-width="0.3"/>
  <rect x="100" y="294" width="60" height="14" rx="7" fill="#151515"/>

  <!-- Prompt input -->
  <rect x="100" y="322" width="134" height="22" rx="6" fill="#141414" stroke="#1e1e1e" stroke-width="0.3"/>
  <text x="153" y="336" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="white" opacity="0.15">Type your prompt...</text>
  <circle cx="226" cy="333" r="6" fill="#4CD964" opacity="0.12"/>
  <path d="M223,333 L229,333 M226,330 L226,336" stroke="#4CD964" stroke-width="1" opacity="0.4"/>

  <!-- Divider -->
  <line x1="95" y1="385" x2="240" y2="385" stroke="#1a1a1a" stroke-width="0.5" stroke-dasharray="2 3"/>

  <!-- Host App section -->
  <rect x="87" y="398" width="160" height="185" rx="8" fill="#0d0d0d" stroke="#1a1a1a" stroke-width="0.5"/>
  <text x="167" y="424" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="13" font-weight="600" fill="white">Host App</text>
  <text x="167" y="442" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="white" opacity="0.3">Your React Native App</text>

  <!-- Code lines -->
  <g opacity="0.12">
    <rect x="100" y="460" width="50" height="5" rx="2.5" fill="white"/>
    <rect x="100" y="471" width="80" height="5" rx="2.5" fill="white"/>
    <rect x="112" y="482" width="58" height="5" rx="2.5" fill="white"/>
    <rect x="112" y="493" width="68" height="5" rx="2.5" fill="white"/>
    <rect x="100" y="504" width="45" height="5" rx="2.5" fill="white"/>
    <rect x="100" y="515" width="85" height="5" rx="2.5" fill="white"/>
    <rect x="112" y="526" width="55" height="5" rx="2.5" fill="white"/>
    <rect x="100" y="537" width="40" height="5" rx="2.5" fill="white"/>
  </g>

  <!-- HMR badge -->
  <rect x="100" y="552" width="124" height="18" rx="4" fill="#091409" stroke="#163016" stroke-width="0.3"/>
  <circle cx="112" cy="561" r="3" fill="#4CD964" opacity="0.6"/>
  <text x="122" y="565" font-family="'SF Mono', 'Fira Code', monospace" font-size="8" fill="#4CD964" opacity="0.5">HMR Connected</text>

  <!-- ═══════════════════════════════ -->
  <!-- SERVER COMPONENTS               -->
  <!-- ═══════════════════════════════ -->

  <!-- Prompt Server -->
  <rect x="445" y="175" width="270" height="155" rx="10" fill="#0b0b0b" stroke="#191919" stroke-width="0.8"/>
  <text x="580" y="210" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="600" fill="white">Prompt Server</text>
  <text x="580" y="230" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="white" opacity="0.3">WebSocket + HTTP</text>
  <line x1="465" y1="244" x2="695" y2="244" stroke="#161616" stroke-width="0.5"/>
  <text x="580" y="266" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">authentication · routing</text>
  <text x="580" y="282" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">response streaming</text>
  <text x="580" y="298" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">git polling · session persist</text>
  <text x="580" y="314" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">image upload · HMR retrigger</text>

  <!-- Claude Code -->
  <ellipse cx="960" cy="252" rx="200" ry="110" fill="url(#claudeGlow)"/>
  <rect x="820" y="175" width="290" height="155" rx="10" fill="#0b0b0b" stroke="#152715" stroke-width="0.8"/>
  <text x="965" y="210" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="600" fill="white">Claude Code</text>
  <text x="965" y="230" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#4CD964" opacity="0.55">Agent SDK</text>
  <line x1="840" y1="244" x2="1090" y2="244" stroke="#152715" stroke-width="0.5"/>
  <text x="965" y="266" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">edit files · run shell commands</text>
  <text x="965" y="282" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">git operations · code reasoning</text>
  <text x="965" y="298" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">tool use streaming</text>
  <text x="965" y="314" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">bypassPermissions mode</text>

  <!-- File System -->
  <rect x="820" y="440" width="290" height="145" rx="10" fill="#0b0b0b" stroke="#191919" stroke-width="0.8"/>
  <text x="965" y="475" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="600" fill="white">File System</text>
  <text x="965" y="495" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="white" opacity="0.3">Your Project Files</text>
  <line x1="840" y1="508" x2="1090" y2="508" stroke="#161616" stroke-width="0.5"/>
  <text x="965" y="530" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">App.tsx · components/ · hooks/</text>
  <text x="965" y="546" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">package.json · .expo-air.local.json</text>
  <text x="965" y="562" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">styles · utils · services</text>

  <!-- Metro Bundler -->
  <rect x="445" y="440" width="270" height="145" rx="10" fill="#0b0b0b" stroke="#191919" stroke-width="0.8"/>
  <text x="580" y="475" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="600" fill="white">Metro Bundler</text>
  <text x="580" y="495" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="white" opacity="0.3">Hot Module Replacement</text>
  <line x1="465" y1="508" x2="695" y2="508" stroke="#161616" stroke-width="0.5"/>
  <text x="580" y="530" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">file watcher · JS bundling</text>
  <text x="580" y="546" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">incremental hot updates</text>
  <text x="580" y="562" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="9" fill="white" opacity="0.17">auto-reconnect on disconnect</text>

  <!-- ═══════════════════════════════ -->
  <!-- FLOW ARROWS                     -->
  <!-- ═══════════════════════════════ -->

  <!-- Arrow 1: Widget → Prompt Server (through tunnel, dashed) -->
  <path d="M262,282 Q350,265 445,252" fill="none" stroke="#4CD964" stroke-width="1.5" stroke-dasharray="6 4" opacity="0.6" marker-end="url(#arrow)"/>

  <!-- Arrow 2: Prompt Server → Claude Code (solid) -->
  <line x1="715" y1="252" x2="815" y2="252" stroke="#4CD964" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Arrow 3: Claude Code → File System (solid, down) -->
  <line x1="965" y1="330" x2="965" y2="435" stroke="#4CD964" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Arrow 4: File System → Metro Bundler (solid, left) -->
  <line x1="815" y1="512" x2="720" y2="512" stroke="#4CD964" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Arrow 5: Metro → Phone Host App (through tunnel, dashed) -->
  <path d="M445,512 Q350,500 262,488" fill="none" stroke="#4CD964" stroke-width="1.5" stroke-dasharray="6 4" opacity="0.6" marker-end="url(#arrow)"/>

  <!-- ═══════════════════════════════ -->
  <!-- STEP NUMBERS                    -->
  <!-- ═══════════════════════════════ -->

  <!-- Step 1 -->
  <circle cx="350" cy="260" r="12" fill="#4CD964"/>
  <text x="350" y="264" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#050505">1</text>

  <!-- Step 2 -->
  <circle cx="765" cy="238" r="12" fill="#4CD964"/>
  <text x="765" y="242" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#050505">2</text>

  <!-- Step 3 -->
  <circle cx="985" cy="382" r="12" fill="#4CD964"/>
  <text x="985" y="386" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#050505">3</text>

  <!-- Step 4 -->
  <circle cx="765" cy="498" r="12" fill="#4CD964"/>
  <text x="765" y="502" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#050505">4</text>

  <!-- Step 5 -->
  <circle cx="350" cy="500" r="12" fill="#4CD964"/>
  <text x="350" y="504" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="700" fill="#050505">5</text>

  <!-- ═══════════════════════════════ -->
  <!-- ARROW LABELS                    -->
  <!-- ═══════════════════════════════ -->

  <text x="350" y="246" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="8" fill="#4CD964" opacity="0.45">send prompt</text>

  <text x="765" y="225" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="8" fill="#4CD964" opacity="0.45">SDK query()</text>

  <text x="1005" y="386" text-anchor="start" font-family="'SF Mono', 'Fira Code', monospace" font-size="8" fill="#4CD964" opacity="0.45">edit files</text>

  <text x="765" y="486" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="8" fill="#4CD964" opacity="0.45">detect changes</text>

  <text x="350" y="516" text-anchor="middle" font-family="'SF Mono', 'Fira Code', monospace" font-size="8" fill="#4CD964" opacity="0.45">HMR push</text>

  <!-- ═══════════════════════════════ -->
  <!-- LOOP INDICATOR                  -->
  <!-- ═══════════════════════════════ -->

  <path d="M 68 565 Q 50 490, 50 390 Q 50 290, 68 215" fill="none" stroke="#4CD964" stroke-width="0.8" stroke-dasharray="3 4" opacity="0.15" marker-end="url(#arrowDim)"/>
  <text x="35" y="392" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="7" fill="#4CD964" opacity="0.2" transform="rotate(-90, 35, 392)">loop continues</text>

  <!-- ═══════════════════════════════ -->
  <!-- BOTTOM LEGEND                   -->
  <!-- ═══════════════════════════════ -->

  <g font-family="system-ui, -apple-system, sans-serif" font-size="12">
    <circle cx="82" cy="678" r="8" fill="#4CD964" opacity="0.2"/>
    <text x="82" y="682" text-anchor="middle" font-size="9" font-weight="600" fill="#4CD964" opacity="0.6">1</text>
    <text x="97" y="682" font-size="12" fill="white" opacity="0.4">Type a prompt</text>

    <circle cx="262" cy="678" r="8" fill="#4CD964" opacity="0.2"/>
    <text x="262" y="682" text-anchor="middle" font-size="9" font-weight="600" fill="#4CD964" opacity="0.6">2</text>
    <text x="277" y="682" font-size="12" fill="white" opacity="0.4">Stream to Claude</text>

    <circle cx="468" cy="678" r="8" fill="#4CD964" opacity="0.2"/>
    <text x="468" y="682" text-anchor="middle" font-size="9" font-weight="600" fill="#4CD964" opacity="0.6">3</text>
    <text x="483" y="682" font-size="12" fill="white" opacity="0.4">Claude edits code</text>

    <circle cx="688" cy="678" r="8" fill="#4CD964" opacity="0.2"/>
    <text x="688" y="682" text-anchor="middle" font-size="9" font-weight="600" fill="#4CD964" opacity="0.6">4</text>
    <text x="703" y="682" font-size="12" fill="white" opacity="0.4">Metro detects</text>

    <circle cx="872" cy="678" r="8" fill="#4CD964" opacity="0.2"/>
    <text x="872" y="682" text-anchor="middle" font-size="9" font-weight="600" fill="#4CD964" opacity="0.6">5</text>
    <text x="887" y="682" font-size="12" fill="white" opacity="0.4">Live update on phone</text>
  </g>

  <!-- Dashed vs Solid legend -->
  <g transform="translate(430, 710)" font-family="'SF Mono', 'Fira Code', monospace" font-size="9">
    <line x1="0" y1="0" x2="30" y2="0" stroke="#4CD964" stroke-width="1" opacity="0.4"/>
    <text x="38" y="3" fill="white" opacity="0.2">local</text>
    <line x1="100" y1="0" x2="130" y2="0" stroke="#4CD964" stroke-width="1" stroke-dasharray="4 3" opacity="0.4"/>
    <text x="138" y="3" fill="white" opacity="0.2">via tunnel</text>
  </g>

  <!-- Bottom accent line -->
  <rect x="540" y="740" width="120" height="1.5" rx="0.75" fill="#4CD964" opacity="0.2"/>
</svg>
